<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bizim Hik√¢yemiz</title>

<style>
:root{
  --bg:#07070b;
  --fg:#f4f4f7;
  --pink: rgba(255,80,130,.95);
}
*{box-sizing:border-box}
body{
  margin:0;height:100vh;overflow:hidden;
  background:radial-gradient(1200px 800px at 50% 60%, rgba(255,70,110,.10), transparent 55%),#07070b;
  color:var(--fg);font-family:system-ui;
}
.center{height:100vh;display:grid;place-items:center}
.card{text-align:center}
.unlock{position:relative;width:520px;max-width:92vw;height:170px;border-radius:18px;border:1px solid rgba(255,255,255,.12)}
.label{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:18px}
.pill{padding:10px 16px;border-radius:999px;border:1px solid rgba(255,255,255,.15)}
.drag-heart{position:absolute;left:50%;top:74px;transform:translate(-50%,-50%);width:70px;height:70px;border-radius:50%;border:1px solid rgba(255,255,255,.2);display:grid;place-items:center;font-size:34px;cursor:grab}
.progress{position:absolute;bottom:0;left:0;width:100%;height:4px;background:rgba(255,255,255,.1)}
.bar{height:100%;width:0;background:linear-gradient(90deg,rgba(255,80,130,.2),rgba(255,80,130,.9))}

.modal{
  position:fixed;inset:0;display:none;
  background:radial-gradient(circle at 50% 40%, rgba(120,130,255,.18), transparent 60%),#0b0f2b;
  justify-content:center;align-items:center;overflow:hidden
}
.modal.show{display:flex}
.videoWrap{width:760px;max-width:96vw;position:relative}
.videoWrap iframe{width:100%;height:430px;border-radius:18px;border:none;background:black}

.hearts{position:absolute;inset:0;pointer-events:none}
.heart-fly{
  position:absolute;bottom:-40px;color:rgba(255,120,160,.75);
  animation:fly 8s linear infinite;
}
@keyframes fly{
  0%{transform:translateY(0) scale(.6);opacity:0}
  10%{opacity:1}
  100%{transform:translateY(-120vh) scale(1.2);opacity:0}
}

.final{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:black}
.final.show{display:flex}
.box{background:rgba(255,255,255,.05);padding:26px;border-radius:18px;text-align:center}
.btn{padding:12px 18px;border-radius:999px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.04);color:white}
</style>
</head>

<body>

<div class="center">
  <div class="card">
    <h1>Bir kilit var‚Ä¶</h1>
    <p>Kalbi ‚ÄúSen‚Äùe s√ºr√ºkle.</p>
    <div class="unlock" id="unlock">
      <div class="label">
        <div class="pill">Ben</div>
        <div class="pill" id="target">Sen</div>
      </div>
      <div class="drag-heart" id="heart">‚ù§</div>
      <div class="progress"><div class="bar" id="bar"></div></div>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="hearts" id="hearts"></div>
  <div class="videoWrap">
    <iframe id="vimeoPlayer"></iframe>
  </div>
</div>

<div class="final" id="final">
  <div class="box">
    <h2>Benimle vakit ge√ßirmek ister misin?</h2>
    <button class="btn">Evet üíó</button>
  </div>
</div>

<script src="https://player.vimeo.com/api/player.js"></script>
<script>
const VIMEO_ID = "1149825208"; // sadece sayƒ±!

const heart = document.getElementById("heart");
const target = document.getElementById("target");
const bar = document.getElementById("bar");
const modal = document.getElementById("modal");
const vimeo = document.getElementById("vimeoPlayer");
const heartsBox = document.getElementById("hearts");
const final = document.getElementById("final");

let dragging=false,startX,startY,originX,originY,completed=false,interval;

heart.onpointerdown = e=>{
 dragging=true;
 const hb=heart.getBoundingClientRect();
 startX=e.clientX;startY=e.clientY;
 originX=hb.left;originY=hb.top;
}

heart.onpointermove = e=>{
 if(!dragging||completed) return;
 heart.style.left = originX+(e.clientX-startX)+"px";
 heart.style.top = originY+(e.clientY-startY)+"px";
 const hr=heart.getBoundingClientRect(),tr=target.getBoundingClientRect();
 const dist=Math.hypot(hr.left-tr.left,hr.top-tr.top);
 const p=Math.max(0,1-dist/200);
 bar.style.width=(p*100)+"%";
 if(p>0.9){ completed=true; openVideo(); }
}

document.onpointerup = ()=> dragging=false;

function spawnHeart(){
 const h=document.createElement("div");
 h.className="heart-fly"; h.innerHTML="‚ù§";
 h.style.left=Math.random()*100+"vw";
 h.style.fontSize=(12+Math.random()*20)+"px";
 heartsBox.appendChild(h);
 setTimeout(()=>h.remove(),9000);
}

function openVideo(){
 modal.classList.add("show");
 vimeo.src = `https://player.vimeo.com/video/${VIMEO_ID}?autoplay=1&title=0&byline=0&portrait=0`;
 interval=setInterval(spawnHeart,400);

 const player=new Vimeo.Player(vimeo);
 player.on('ended',()=>{
   clearInterval(interval);
   heartsBox.innerHTML="";
   modal.classList.remove("show");
   final.classList.add("show");
 });
}
</script>
</body>
</html>
